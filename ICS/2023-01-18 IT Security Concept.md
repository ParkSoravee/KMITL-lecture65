ICS

... 9.30-10.00 มาสาย

อย่างแรกเกณฑ์ "โครงสร้างองกรค์" ถึงจะขอ ISO ได้

>[!Important] ISO 27001 : องค์กร IT อยากได้
>ต้องมีการทำทดสอบ sec pen test เสมอ

- เราอยู่ในยุคที่ sec ที่ทั้งปลอดภัย และไม่ปลอยภัย แต่ base on ไม่ปลอดภัย
- หลังจากนี้อยู่ในยุคที่ complex มากขึ้น

## IT System

![[Pasted image 20230118100236.png | 500]]

>องค์ประกอบของระบบ IT ในอดีตมี 3 อย่าง -> Hardware, Software, and Network

>[!Question] สภาวะที่ระบบสารสนเทศมีความปลอดภัย คืออะไร ??
>me: สภาวะที่ระบบสามารถทำงานได้ปกติ ไม่เกิดภัยคุกคาม และสามารถตรวจสอบ monitor ภัยคุกคามที่จะเข้ามาทำกับระบบได้
>
>teacher:
>มอง 2 เรื่อง ในสภาวะที่ระบบมีความปลอดภัย
>1. การบุกรุก
>2. การทำงานระบบทำงานได้อย่างต่อเนื่อง

ภัยคุกคามสารสนเทศแบ่งเป็น 2 ระดับ
- Incident เหตุฉุกเฉิน -> ไฟไหม้เล็ก, คอขวด : ปัญหาชั่วคราว
- Disastor ภัยวิบัติ -> น้ำท่วม, ไฟไหม้ใหญ่ : ปัญหาระยะยาว ปิดระบบทั้งโซน

ไฟดับ บางที่เป็น Incident บางที่เป็น Disastor แล้วแต่ (ex.ธนาคาร -> Disastor)

sec จับการกับ 2 ระดับนี้
HW เสียหาย คนทำงานไม่ได้

Solution ต้องมาแก้ปัญหาผลกระทบกับระบบสารสนเทศให้ครบ
ex.
- เทรนคนว่าห้ามเปิดไฟล์นามสกุลนี้ เปิดได้เฉพาะ .ppt ออกเป็น policy

ลดโอกาสการเกิดได้ แต่ต้องดูว่าแต่ละ solution แก้อะไร ด้านไหนของระบบสารสนเทศ

## Security Concept

โยงให้ได้ว่าปัญหาเกิดจากอันนี้ ใช้เครื่องมือนี้มาแก้

### CIA
#### Confidentiality
ปัญหาแรกๆ เลย ข้อมูลถูกขโมย
**ข้อมูลเป็นอะไร**
- ไฟล์
- กระดาษ
- Network
- การทำ process ข้ามกัน
**หลักๆ**
- data ที่ถูกเก็บ
- data ที่ส่งผ่าน network
	- มี ip ต้นทาง ปลายทาง

การจัดการ -> ใช้หลัก **เข้ารหัส-ถอดรหัส** 

- “ข้อมูลใดที่เป็นความลับ จะต้องไม่ถูกเปิดเผยให้กับบุคคลอื่นที่ไม่มีสิทธิในการอ่าน ข้อมูลดังกล่าว”
- แนวทางการดาเนินการคือการเข้ารหัสข้อมูล (Encryption) แล้วให้เฉพาะบุคคลที่มี key/password เท่านั้นที่สามารถถอดรหัสข้อมูลดังกล่าวได้ (Decryption)

จะมีการจัดระดับของข้อมูลเป็น level 7 level
lv0. ไม่สำคัญ
lv สูงสำคัญมาก เพิ่มความปลอดภัย

Plain Text -**encryption**-> Cipher Text

**Crytography** เป็นเทคนิคในการทำ encryption เทคโนโลยีเป็น 2 แบบ
- Symmetric key cryptography
key1 เข้ารหัส ถอดรหัส ใช้ key เดียวกัน
- Asymmetric key cryptography
key1 เข้ารหัส, key2 ถอดรหัส, คนละ key กัน

แบ่งเป็นหลาย Algorithm แต่ละอันมีความปลอดภัยไม่เท่ากัน
Symmetic key 
- DES -> 56 bit key แต่หลังๆ มา สามารถแกะได้ถ้ามีเวลามากพอ
- AES -> ใช้ key ใหญ่ขึ้น 128, 192, 256 bit

>[!Note] แต่ปัญหาคือ key ได้มายังไง?? โยนไปให้ปลายทางยังไง??
>มี 3 วิธี
>- ทำ key generate algorithm ให้สองข้าง gen ออกมาเหมือนกัน
>- ทำกระบวนการ key exchange ส่งไปทางพิเศษ ไม่ค่อยมีใครใช้ จะเจนสองฝั่งมากกว่า
>- gen เป็น asymmetric แยกกันเลย (แต่มีกระบวนการให้ key 2 ฝั่งเหมือนกัน) ถ้าสนใจไปดูกระบวนการทำ key exchange SSL

>[!INFO] [SSL][SSL/TLS คืออะไร? มีความสำคัญมากแค่ไหนกัน - Cloud HM](https://blog.cloudhm.co.th/what-is-ssl-and-tls/)

เปิดหน้าเว็บ SSL ส่งไปรอบเดียวเอา key ครั้งเดียว แล้วใช้ตลอด จะจำไว้ได้ยังไง?

>[!Note] นอกจากเรื่องการส่งแล้ว แล้วจะ manage key จะเก็บ key ยังไง??

ข้อดีของ symmetric key คีย์เดี่ยว -> ปลอดภัยมาก ยิ่งยาวยิ่งปลอดภัย
ปลอดภัยมากกว่า asym หลายเท่า
128 bit ทุก bit เป็น key ได้หมด
2^128 สามารถเป็น key ได้หมด ถ้า brute force ต้องแกะทั้งหมด 2^128 ใช้เวลานานมาก
มีเรื่อง prime number ด้วย 1 ใน 3 จะไม่ใช่ key
???????????

**Asymmetric**
แม่กุญแจที่มี 2 รู
เข้าด้วย key1 ต้องถอดด้วย key2, เข้าด้วย key2 ต้องถอดด้วย key1

key1 -> private key
key2 เอาไปปั๊ม -> public key

คนที่ถอดจะรู้ว่า คนที่เข้ารหัส เจ้าของ private key คือใคร
-> verify ข้อมูลได้ว่า เจ้าของเป็นใคร (symmetric ทำไม่ได้)

ในทางกลับกัน ถ้าเอา public key มาเข้ารหัส มาล็อค แล้วส่งไป
ต้องเอา private key ที่มีแค่อันเดียว มาถอดได้เท่านั้น!

2 feature
- verify เจ้าของ
- เข้ารหัสได้

เกิดกระบวนการ PKI

popular algorithm
- RSA *เน้น*
digital signature, certificate เอามาใช้หมดเลย
- ECC
- Diffie-Hellman เป็น key exchange sym ทำให้ 2 ฝั่งเหมือนกัน แต่กระบวนการส่งใช้ asym ส่ง key ในที่ปลอดภัย (ปลอดภัยมากกก)
- DSA 

**สรุป**
symmetric ปลอดภัยสูง (แต่ปัญหา key exchange)
asymmetric ได้ 2 feature

--
เครื่องมือ (ไม่ network ก็ storage)
- windows server, MAC -> Encrypt file system
- https ส่ง certificate (มี key)
มีกระบวนการให้ได้ key ก่อน หลังจาก hand shake ถึงจะส่งข้อมูลปกติ
- VPN ขอ public key ฝั่งตรงข้าม(RT) มา เข้ารหัสแล้วส่งไป

>[!Important] Confidentiallity กลไกเปลี่ยนข้อมูลสำคัญให้เป็นข้อมูลที่อ่านไม่ออก


#### Integrity

-> การตรวจสอบความถูกต้อง**สมบูรณ์**ของข้อมูล
เพิ่มกลไก ในการตรวจสอบเข้าไป
แบ่งเป็น 2 ส่วน
- ข้อมูลถูกต้อง ไม่ถูกแก้ไข สมบูณณ์ แน่นอน
- ระบุได้ว่าใครเป็นเจ้าของข้อมูล (ใส่ verification เข้ามา)

ไม่ได้เป็นความลับ เราอ่านได้ แต่ต้องมีตัวตรวจสอบความถูกต้อง

>[!Note] ข้อมูลที่ใช้ในชีวิตประจำวันอะไร มีตัวตรวจสอบความถูกต้องมาด้วย ?
>ex.
>- Check sum ในระบบคอมพิวเตอร์ (ตรวจ error ใน memory)
>- Check digit บัตรประชาชน หลักสุดท้าย เป็นการ verify ว่าตัวหน้าทุกตัวเขียนถูก, Book bank, รหัส account อื่นๆ
>- digital signature เป็นข้อมูลแปะต่อท้ายข้อมูลที่เราจะส่ง

ตรวจสอบว่าข้อมูลนั้นมาจากต้นทางจริงๆ -> digital signature
steps: ฝั่งส่งเอา data มา hash (เพราะ data ใหญ่ จะ overhead สูง เลยเอาตัวแทน) ตัวแทน -> fingerprint (ความยาวแล้วแต่ algorithm md5,sha1,...) แล้วเอามาเข้ารหัส ใช้ private key ของคนส่ง
ได้ผลลัพท์เป็น digital signature เป็นตัวแทนของทั้งการไม่เปลี่ยนแปลง data และ verify ผู้ส่งด้วย

ส่งข้อมูลเอาข้อมูล + digital signature ไปยังผู้รับ

ผู้รับ verify ยังไงว่าถูกต้อง?? ไม่ดูทั้ง data ดูแค่ diital signature
เอา digital signature ไป decrypt ด้วย public key ของคนส่ง จะได้ fingerprint
แล้วเอา data มาเข้า hash (ตัวเดียวกัน) 
แล้วจะได้ fingerprint มาเทียบกัน ถ้าเท่ากัน = ผ่าน

ปลายทางไม่รู้ว่า public key อันไหน เลยมีกระบวนการให้แนบ public key ไปกับ digital signature ด้วย

ถ้าส่งแค่ fingerprint ไม่ต้องเข้ารหัส ก็สามารถตรวจได้ว่าข้อมูลถูกต้อง
แต่ทำแบบนี้ให้ได้ digital signature เพื่อระบุผู้ส่งได้

>Hash -> md5(เลิกใช้แล้ว), sha1, sha2

แต่ปัญหาเกิดขึ้น?? มีกลไกที่ไม่น่าเชื่อถือคือ ไม่สามารถระบุที่มาได้ว่า public key นี้เป็นของใคร
ตรวจสอบความถูกต้องได้ แต่ verify ผู้ส่ง ยังไม่สมบูรณ์

กลับไปขั้นตอนแรก

ขั้นตอนที่ไม่น่าเชื่อถือคือ ตอนผู้ส่ง gen public key เอง (ไม่งั้นเหมือนเราสร้าง บัตรประชาชนเองได้)
ออกกฎหมายว่าทุกคนต้องถือบัตร ปชช ตัวเอง และสามารถ verify ได้ว่าเป็นคนไทย
ถามว่าเชื่อถือบัตร? ไม่ แต่ว่าเชื่อถือ กรมการปกครอง
เราออกบัตร ปชช (public, private key) เองไม่ได้ ต้องให้คนอื่นออกให้
ให้ใครออกให้?? 
-> Certificate Authority  : CA (เป็น server ตัวนึง) มันจะ gen certificate ให้ 1 อันมี public กับ private key

ถือตังไป 300 ให้ CA gen key pair ใส่ flash drive มาให้ (มีการยืนยันตัวเรียบร้อยแล้ว)
ทีนี้ได้ private ไปทำแบบเดิม แล้วส่ง public key + ใบ cer ส่งไป

ขั้นตอนเพิ่มมาคือเอา certificate ส่งไปด้วย เพื่อที่จะรู้ว่าใครเป็นคนให้ cer

ฝั่งรับ กระบวนการทั้งหมดยังไม่ทำ ต้องเอา cer ไปติดต่อที่ CA (ทำผ่าน network) เช็คว่า
- ใบ cer มาจากองค์กรไหน แล้วได้รับการรับรองหรือยัง
- public ที่ได้มากับใบ cer ถูกไหม หมดอายุหรือยัง
- สมาชิกหรือเจ้าของ มีตัวตนอยู่จริง
CA จะมีหน่วยงานใหญ่ CA server แตกย่อยมาเป็น Tree แล้วเวลาตรวจสอบจะตรวจไปถึง root ถ้า trust ก็ trust ทั้งสาย

>[!Important] Certificate , key มีหมดอายุด้วย

CA Server เป็นการช่วยในการยืนยันตัวตน

ทุกวันนี้อยากให้ทุกคนมี Private public key ของตัวเองทุกคน

แล้วถ้าอยากให้ข้อมูลไม่เปลี่ยนแปลง แล้วมีเข้ารหัส ความปลอดภัยสูงมากๆ (ex. bank ส่งข้อมูลระหว่างสาขา) เพิ่มขั้นตอน...
ผู้รับ (ปลายทาง) ต้องส่ง public key + certificate มาให้ก่อน
ก่อนส่ง encrypt data ด้วย public key ผู้รับ
ฝั่งรับถอดรหัสก่อนด้วย private key ตัวเอง
จะได้ทั้ง Confidentiality and Integrity

**สรุปกระบวนการ Integrity**
- data ได้รับถูกต้อง ไม่มีการเปลี่ยนแปลง
- ตรวจสอบผู้ส่ง คนที่ส่งมา มีตัวต้น 
	- hashing algorithm ex. sha2 (ปัจจุบัน)
	- digital signature ที่ใช้ CA (เป็นมาตรฐานทุก service แล้ว ตรวจสอบการคงอยู่ของคน)


#### Availability

